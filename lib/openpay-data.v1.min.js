/*! openpay-data.js v1.2.39 2023-07-25 */
!function(){var r=function(){},t=function(){},e=function(){};function s(){return r._deviceDataId=r._deviceDataId===undefined?v.codec.base64.fromBits(v.random.randomWords(6,0)).replace(/[\+\/]/g,"0"):r._deviceDataId}function a(){var t,e,n=s(),o=OpenPay.developMode?r._developHostname:OpenPay.sandboxMode?r._sandboxHostname:r._hostname,i=OpenPay.getId();return o=(o=o)+"antifraud/"+i+"/components?s="+n,window.XDomainRequest?((t=new XDomainRequest).open("GET",o),t.onload=function(){document.body.insertAdjacentHTML("beforeend",t.responseText)},setTimeout(function(){t.send()},0)):((e=new XMLHttpRequest).onreadystatechange=function(){4==e.readyState&&200==e.status&&document.body.insertAdjacentHTML("beforeend",e.responseText)},e.open("GET",o,!0),e.send()),s()}r._hostname="https://api.openpay.mx/",r._sandboxHostname="https://sandbox-api.openpay.mx/",r._developHostname="https://dev-api.openpay.mx/",r._deviceDataId=undefined,r.setup=function(t,e){var n=s(),e=(t&&document.getElementById(t)&&((o=document.createElement("input")).setAttribute("type","hidden"),o.value=n,o.name=e||"deviceDataId",o.id=e||"deviceDataId",document.getElementById(t).appendChild(o)),!0);try{OpenPay.getId(),OpenPay.getApiKey()}catch(i){e=!1}if(e){console.log("executing sift mode");var t=OpenPay.getId(),o=OpenPay.getApiKey(),e=OpenPay.developMode?r._developHostname:OpenPay.sandboxMode?r._sandboxHostname:r._hostname,t=e+"v1/"+t+"/antifraudkeys";try{OpenPay.getBeaconKey.beaconKey(t,o,"",n,e)}catch(i){console.log("continue without beaconkey"+i)}}return a()},e.beaconKey=function(t,e,o,i,r){var s=null,a=null,n={},e=btoa(e+":"),c={};function h(t,e,n){clearTimeout(a);n=n||"{}";try{JSON.parse(n)}catch(o){}}if("undefined"==typeof JSON)h();else{var l=XMLHttpRequest&&"withCredentials"in new XMLHttpRequest;if(l){function d(){if("undefined"!=typeof s.readyState&&4==s.readyState||!l)if(clearTimeout(a),s.status<200||300<=s.status)h(0,s.status,s.responseText);else try{var t=s.responseText;t=(t=t.replace("(","")).replace(")","");var e=JSON.parse(t).data;console.log("beaconKey ok"),0<e.length?OpenPay.deviceDataSC.setupSC(o,i,e,r):console.log("Empty beaconKey normal in Sandbox")}catch(n){h(0,s.status,"{}")}}if(s=function(){if(t=window,"function"==(n=typeof t[e="XMLHttpRequest"])||"object"==n&&t[e]||"unknown"==n)return new XMLHttpRequest;var t,e,n}()){for(var u in n={Accept:"application/json","Content-Type":"application/json",Authorization:"Basic "+e},s.open("GET",t,!0),"withCredentials"in s&&(s.withCredentials=!0),n)n.hasOwnProperty(u)&&n[u]&&"setRequestHeader"in s&&s.setRequestHeader(u,n[u]);"onreadystatechange"in s?s.onreadystatechange=d:"onload"in s&&"onerror"in s&&(s.onload=d,s.onerror=h),a=setTimeout(function(){"onload"in s?s.onload=Function.prototype:s.onreadystatechange=Function.prototype,s.abort(),s=null,h()},4e4),s.send()}else h()}else"undefined"!=typeof XDomainRequest?(c.apiKey=e,$jsonp.send({callbackName:"getResultData",onSuccess:function(t){if(t.error)h(0,t.httpStatus,JSON.stringify(t));else try{var e=t.data;console.log("beaconKey ok"),0<e.length?OpenPay.deviceDataSC.setupSC(o,i,e,r):console.log("Empty beaconKey normal in Sandbox")}catch(n){h(0,s.status,"{}")}},onError:h,timeout:4e4,url:t+"/jsonp",data:c})):h()}},t.setupSC=function(t,e,n,o){console.log("Sift Snippet");var i=window._sift=window._sift||[],n=(i.push(["_setAccount",n]),i.push(["_setSessionId",e]),i.push(["_trackPageview"]),document.createElement("script")),e=(n.type="text/javascript",n["async"]=!0,n.src=o+"antifraud/sc.js",document.getElementsByTagName("script")[0]);e.parentNode.insertBefore(n,e)},OpenPay.deviceData=r,OpenPay.getBeaconKey=e,OpenPay.deviceDataSC=t;var n,o,i,v={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(t){this.toString=function(){return"CORRUPT: "+this.message},this.message=t},invalid:function(t){this.toString=function(){return"INVALID: "+this.message},this.message=t},bug:function(t){this.toString=function(){return"BUG: "+this.message},this.message=t},notReady:function(t){this.toString=function(){return"NOT READY: "+this.message},this.message=t}}};"undefined"!=typeof module&&module.exports&&(module.exports=v),v.cipher.aes=function(t){this._tables[0][0][0]||this._precompute();var e,n,o,i,r,s=this._tables[0][4],a=this._tables[1],c=t.length,h=1;if(4!==c&&6!==c&&8!==c)throw new v.exception.invalid("invalid aes key size");for(this._key=[i=t.slice(0),r=[]],e=c;e<4*c+28;e++)o=i[e-1],(e%c==0||8===c&&e%c==4)&&(o=s[o>>>24]<<24^s[o>>16&255]<<16^s[o>>8&255]<<8^s[255&o],e%c==0)&&(o=o<<8^o>>>24^h<<24,h=h<<1^283*(h>>7)),i[e]=i[e-c]^o;for(n=0;e;n++,e--)o=i[3&n?e:e-4],r[n]=e<=4||n<4?o:a[0][s[o>>>24]]^a[1][s[o>>16&255]]^a[2][s[o>>8&255]]^a[3][s[255&o]]},v.cipher.aes.prototype={encrypt:function(t){return this._crypt(t,0)},decrypt:function(t){return this._crypt(t,1)},_tables:[[[],[],[],[],[]],[[],[],[],[],[]]],_precompute:function(){for(var t,e,n,o,i,r,s,a=this._tables[0],c=this._tables[1],h=a[4],l=c[4],d=[],u=[],p=0;p<256;p++)u[(d[p]=p<<1^283*(p>>7))^p]=p;for(t=e=0;!h[t];t^=n||1,e=u[e]||1)for(s=16843009*d[o=d[n=d[l[h[t]=i=(i=e^e<<1^e<<2^e<<3^e<<4)>>8^255&i^99]=t]]]^65537*o^257*n^16843008*t,r=257*d[i]^16843008*i,p=0;p<4;p++)a[p][t]=r=r<<24^r>>>8,c[p][i]=s=s<<24^s>>>8;for(p=0;p<5;p++)a[p]=a[p].slice(0),c[p]=c[p].slice(0)},_crypt:function(t,e){if(4!==t.length)throw new v.exception.invalid("invalid aes block size");for(var n,o,i,r=this._key[e],s=t[0]^r[0],a=t[e?3:1]^r[1],c=t[2]^r[2],h=t[e?1:3]^r[3],l=r.length/4-2,d=4,u=[0,0,0,0],t=this._tables[e],p=t[0],_=t[1],f=t[2],y=t[3],m=t[4],g=0;g<l;g++)n=p[s>>>24]^_[a>>16&255]^f[c>>8&255]^y[255&h]^r[d],o=p[a>>>24]^_[c>>16&255]^f[h>>8&255]^y[255&s]^r[d+1],i=p[c>>>24]^_[h>>16&255]^f[s>>8&255]^y[255&a]^r[d+2],h=p[h>>>24]^_[s>>16&255]^f[a>>8&255]^y[255&c]^r[d+3],d+=4,s=n,a=o,c=i;for(g=0;g<4;g++)u[e?3&-g:g]=m[s>>>24]<<24^m[a>>16&255]<<16^m[c>>8&255]<<8^m[255&h]^r[d++],n=s,s=a,a=c,c=h,h=n;return u}},v.bitArray={bitSlice:function(t,e,n){return t=v.bitArray._shiftRight(t.slice(e/32),32-(31&e)).slice(1),n===undefined?t:v.bitArray.clamp(t,n-e)},extract:function(t,e,n){var o=Math.floor(-e-n&31),e=-32&(e+n-1^e)?t[e/32|0]<<32-o^t[e/32+1|0]>>>o:t[e/32|0]>>>o;return e&(1<<n)-1},concat:function(t,e){var n,o;return 0===t.length||0===e.length||(n=t[t.length-1],32===(o=v.bitArray.getPartial(n)))?t.concat(e):v.bitArray._shiftRight(e,o,0|n,t.slice(0,t.length-1))},bitLength:function(t){var e=t.length;return 0===e?0:(t=t[e-1],32*(e-1)+v.bitArray.getPartial(t))},clamp:function(t,e){var n;return 32*t.length<e||(n=(t=t.slice(0,Math.ceil(e/32))).length,e&=31,0<n&&e&&(t[n-1]=v.bitArray.partial(e,t[n-1]&2147483648>>e-1,1))),t},partial:function(t,e,n){return 32===t?e:(n?0|e:e<<32-t)+1099511627776*t},getPartial:function(t){return Math.round(t/1099511627776)||32},equal:function(t,e){if(v.bitArray.bitLength(t)!==v.bitArray.bitLength(e))return!1;for(var n=0,o=0;o<t.length;o++)n|=t[o]^e[o];return 0===n},_shiftRight:function(t,e,n,o){var i,r;for(o===undefined&&(o=[]);32<=e;e-=32)o.push(n),n=0;if(0===e)return o.concat(t);for(i=0;i<t.length;i++)o.push(n|t[i]>>>e),n=t[i]<<32-e;return r=t.length?t[t.length-1]:0,r=v.bitArray.getPartial(r),o.push(v.bitArray.partial(e+r&31,32<e+r?n:o.pop(),1)),o},_xor4:function(t,e){return[t[0]^e[0],t[1]^e[1],t[2]^e[2],t[3]^e[3]]}},v.codec.utf8String={fromBits:function(t){for(var e,n="",o=v.bitArray.bitLength(t),i=0;i<o/8;i++)0==(3&i)&&(e=t[i/4]),n+=String.fromCharCode(e>>>24),e<<=8;return decodeURIComponent(escape(n))},toBits:function(t){t=unescape(encodeURIComponent(t));for(var e=[],n=0,o=0;o<t.length;o++)n=n<<8|t.charCodeAt(o),3==(3&o)&&(e.push(n),n=0);return 3&o&&e.push(v.bitArray.partial(8*(3&o),n)),e}},v.codec.base64={_chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(t,e,n){var o,i="",r=0,s=v.codec.base64._chars,a=0,c=v.bitArray.bitLength(t);for(n&&(s=s.substr(0,62)+"-_"),o=0;6*i.length<c;)i+=s.charAt((a^t[o]>>>r)>>>26),r<6?(a=t[o]<<6-r,r+=26,o++):(a<<=6,r-=6);for(;3&i.length&&!e;)i+="=";return i},toBits:function(t,e){t=t.replace(/\s|=/g,"");var n,o,i=[],r=0,s=v.codec.base64._chars,a=0;for(e&&(s=s.substr(0,62)+"-_"),n=0;n<t.length;n++){if((o=s.indexOf(t.charAt(n)))<0)throw new v.exception.invalid("this isn't base64!");26<r?(i.push(a^o>>>(r-=26)),a=o<<32-r):a^=o<<32-(r+=6)}return 56&r&&i.push(v.bitArray.partial(56&r,a,1)),i}},v.codec.base64url={fromBits:function(t){return v.codec.base64.fromBits(t,1,1)},toBits:function(t){return v.codec.base64.toBits(t,1)}},v.hash.sha256=function(t){this._key[0]||this._precompute(),t?(this._h=t._h.slice(0),this._buffer=t._buffer.slice(0),this._length=t._length):this.reset()},v.hash.sha256.hash=function(t){return(new v.hash.sha256).update(t).finalize()},v.hash.sha256.prototype={blockSize:512,reset:function(){return this._h=this._init.slice(0),this._buffer=[],this._length=0,this},update:function(t){"string"==typeof t&&(t=v.codec.utf8String.toBits(t));for(var e=this._buffer=v.bitArray.concat(this._buffer,t),n=this._length,o=this._length=n+v.bitArray.bitLength(t),i=512+n&-512;i<=o;i+=512)this._block(e.splice(0,16));return this},finalize:function(){for(var t=this._buffer,e=this._h,n=(t=v.bitArray.concat(t,[v.bitArray.partial(1,1)])).length+2;15&n;n++)t.push(0);for(t.push(Math.floor(this._length/4294967296)),t.push(0|this._length);t.length;)this._block(t.splice(0,16));return this.reset(),e},_init:[],_key:[],_precompute:function(){var t,e=0,n=2;function o(t){return 4294967296*(t-Math.floor(t))|0}t:for(;e<64;n++){for(t=2;t*t<=n;t++)if(n%t==0)continue t;e<8&&(this._init[e]=o(Math.pow(n,.5))),this._key[e]=o(Math.pow(n,1/3)),e++}},_block:function(t){for(var e,n,o=t.slice(0),t=this._h,i=this._key,r=t[0],s=t[1],a=t[2],c=t[3],h=t[4],l=t[5],d=t[6],u=t[7],p=0;p<64;p++)e=(e=p<16?o[p]:(e=o[p+1&15],n=o[p+14&15],o[15&p]=(e>>>7^e>>>18^e>>>3^e<<25^e<<14)+(n>>>17^n>>>19^n>>>10^n<<15^n<<13)+o[15&p]+o[p+9&15]|0))+u+(h>>>6^h>>>11^h>>>25^h<<26^h<<21^h<<7)+(d^h&(l^d))+i[p],u=d,d=l,l=h,h=c+e|0,c=a,a=s,r=e+((s=r)&a^c&(s^a))+(s>>>2^s>>>13^s>>>22^s<<30^s<<19^s<<10)|0;t[0]=t[0]+r|0,t[1]=t[1]+s|0,t[2]=t[2]+a|0,t[3]=t[3]+c|0,t[4]=t[4]+h|0,t[5]=t[5]+l|0,t[6]=t[6]+d|0,t[7]=t[7]+u|0}},v.prng=function(t){this._pools=[new v.hash.sha256],this._poolEntropy=[0],this._reseedCount=0,this._robins={},this._eventId=0,this._collectorIds={},this._collectorIdNext=0,this._strength=0,this._poolStrength=0,this._nextReseed=0,this._key=[0,0,0,0,0,0,0,0],this._counter=[0,0,0,0],this._cipher=undefined,this._defaultParanoia=t,this._collectorsStarted=!1,this._callbacks={progress:{},seeded:{}},this._callbackI=0,this._NOT_READY=0,this._READY=1,this._REQUIRES_RESEED=2,this._MAX_WORDS_PER_BURST=65536,this._PARANOIA_LEVELS=[0,48,64,96,128,192,256,384,512,768,1024],this._MILLISECONDS_PER_RESEED=3e4,this._BITS_PER_RESEED=80},v.prng.prototype={randomWords:function(t,e){var n,o,i=[],e=this.isReady(e);if(e===this._NOT_READY)throw new v.exception.notReady("generator isn't seeded");for(e&this._REQUIRES_RESEED&&this._reseedFromPools(!(e&this._READY)),n=0;n<t;n+=4)(n+1)%this._MAX_WORDS_PER_BURST==0&&this._gate(),o=this._gen4words(),i.push(o[0],o[1],o[2],o[3]);return this._gate(),i.slice(0,t)},setDefaultParanoia:function(t,e){if(0===t&&"Setting paranoia=0 will ruin your security; use it only for testing"!==e)throw"Setting paranoia=0 will ruin your security; use it only for testing";this._defaultParanoia=t},addEntropy:function(t,e,n){n=n||"user";var o,i,r,s=(new Date).valueOf(),a=this._robins[n],c=this.isReady(),h=0,l=this._collectorIds[n];switch(l===undefined&&(l=this._collectorIds[n]=this._collectorIdNext++),a===undefined&&(a=this._robins[n]=0),this._robins[n]=(this._robins[n]+1)%this._pools.length,typeof t){case"number":e===undefined&&(e=1),this._pools[a].update([l,this._eventId++,1,e,s,1,0|t]);break;case"object":if("[object Uint32Array]"===(r=Object.prototype.toString.call(t))){for(i=[],o=0;o<t.length;o++)i.push(t[o]);t=i}else for("[object Array]"!==r&&(h=1),o=0;o<t.length&&!h;o++)"number"!=typeof t[o]&&(h=1);if(!h){if(e===undefined)for(o=e=0;o<t.length;o++)for(i=t[o];0<i;)e++,i>>>=1;this._pools[a].update([l,this._eventId++,2,e,s,t.length].concat(t))}break;case"string":e===undefined&&(e=t.length),this._pools[a].update([l,this._eventId++,3,e,s,t.length]),this._pools[a].update(t);break;default:h=1}if(h)throw new v.exception.bug("random: addEntropy only supports number, array of numbers or string");this._poolEntropy[a]+=e,this._poolStrength+=e,c===this._NOT_READY&&(this.isReady()!==this._NOT_READY&&this._fireEvent("seeded",Math.max(this._strength,this._poolStrength)),this._fireEvent("progress",this.getProgress()))},isReady:function(t){t=this._PARANOIA_LEVELS[t!==undefined?t:this._defaultParanoia];return this._strength&&this._strength>=t?this._poolEntropy[0]>this._BITS_PER_RESEED&&(new Date).valueOf()>this._nextReseed?this._REQUIRES_RESEED|this._READY:this._READY:this._poolStrength>=t?this._REQUIRES_RESEED|this._NOT_READY:this._NOT_READY},getProgress:function(t){t=this._PARANOIA_LEVELS[t||this._defaultParanoia];return this._strength>=t||this._poolStrength>t?1:this._poolStrength/t},startCollectors:function(){if(!this._collectorsStarted){if(this._eventListener={loadTimeCollector:this._bind(this._loadTimeCollector),mouseCollector:this._bind(this._mouseCollector),accelerometerCollector:this._bind(this._accelerometerCollector)},window.addEventListener)window.addEventListener("load",this._eventListener.loadTimeCollector,!1),window.addEventListener("mousemove",this._eventListener.mouseCollector,!1),window.addEventListener("devicemotion",this._eventListener.accelerometerCollector,!1);else{if(!document.attachEvent)throw new v.exception.bug("can't attach event");document.attachEvent("onload",this._eventListener.loadTimeCollector),document.attachEvent("onmousemove",this._eventListener.mouseCollector)}this._collectorsStarted=!0}},stopCollectors:function(){this._collectorsStarted&&(window.removeEventListener?(window.removeEventListener("load",this._eventListener.loadTimeCollector,!1),window.removeEventListener("mousemove",this._eventListener.mouseCollector,!1),window.removeEventListener("devicemotion",this._eventListener.accelerometerCollector,!1)):document.detachEvent&&(document.detachEvent("onload",this._eventListener.loadTimeCollector),document.detachEvent("onmousemove",this._eventListener.mouseCollector)),this._collectorsStarted=!1)},addEventListener:function(t,e){this._callbacks[t][this._callbackI++]=e},removeEventListener:function(t,e){var n,o,i=this._callbacks[t],r=[];for(o in i)i.hasOwnProperty(o)&&i[o]===e&&r.push(o);for(n=0;n<r.length;n++)delete i[o=r[n]]},_bind:function(t){var e=this;return function(){t.apply(e,arguments)}},_gen4words:function(){for(var t=0;t<4&&(this._counter[t]=this._counter[t]+1|0,!this._counter[t]);t++);return this._cipher.encrypt(this._counter)},_gate:function(){this._key=this._gen4words().concat(this._gen4words()),this._cipher=new v.cipher.aes(this._key)},_reseed:function(t){this._key=v.hash.sha256.hash(this._key.concat(t)),this._cipher=new v.cipher.aes(this._key);for(var e=0;e<4&&(this._counter[e]=this._counter[e]+1|0,!this._counter[e]);e++);},_reseedFromPools:function(t){var e,n=[],o=0;for(this._nextReseed=n[0]=(new Date).valueOf()+this._MILLISECONDS_PER_RESEED,e=0;e<16;e++)n.push(4294967296*Math.random()|0);for(e=0;e<this._pools.length&&(n=n.concat(this._pools[e].finalize()),o+=this._poolEntropy[e],this._poolEntropy[e]=0,t||!(this._reseedCount&1<<e));e++);this._reseedCount>=1<<this._pools.length&&(this._pools.push(new v.hash.sha256),this._poolEntropy.push(0)),this._poolStrength-=o,o>this._strength&&(this._strength=o),this._reseedCount++,this._reseed(n)},_mouseCollector:function(t){var e=t.x||t.clientX||t.offsetX||0,t=t.y||t.clientY||t.offsetY||0;v.random.addEntropy([e,t],2,"mouse"),this._addCurrentTimeToEntropy(0)},_loadTimeCollector:function(){this._addCurrentTimeToEntropy(2)},_addCurrentTimeToEntropy:function(t){window&&window.performance&&"function"==typeof window.performance.now?v.random.addEntropy(window.performance.now(),t,"loadtime"):v.random.addEntropy((new Date).valueOf(),t,"loadtime")},_accelerometerCollector:function(t){var e,t=t.accelerationIncludingGravity.x||t.accelerationIncludingGravity.y||t.accelerationIncludingGravity.z;window.orientation&&"number"==typeof(e=window.orientation)&&v.random.addEntropy(e,1,"accelerometer"),t&&v.random.addEntropy(t,2,"accelerometer"),this._addCurrentTimeToEntropy(0)},_fireEvent:function(t,e){var n,o=v.random._callbacks[t],i=[];for(n in o)o.hasOwnProperty(n)&&i.push(o[n]);for(n=0;n<i.length;n++)i[n](e)}},v.random=new v.prng(6);try{if("undefined"!=typeof module&&module.exports&&(o=require("crypto"))&&o.randomBytes)n=o.randomBytes(128),n=new Uint32Array(new Uint8Array(n).buffer),v.random.addEntropy(n,1024,"crypto.randomBytes");else if(window&&Uint32Array){if(i=new Uint32Array(32),window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues(i);else{if(!window.msCrypto||!window.msCrypto.getRandomValues)return;window.msCrypto.getRandomValues(i)}v.random.addEntropy(i,1024,"crypto.getRandomValues")}}catch(c){console.log("There was an error collecting entropy from the browser:"),console.log(c)}}.call(this);